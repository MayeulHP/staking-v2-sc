*This file was generated by Elrond City's Utilities Generator. You can find the source code [here](https://github.com/ElrondCity/UtilitiesGenerator/)*  
# StakingV2ScContract

The staking contract for ctzn.city
## Endpoints

### onlyOwner
- **claimUnclaimable**(episode: `u64`)

### Public
- **upgrade**()

- **depositEcity**()  
    Called by the router to deposit ECITY. Marks the beginning of each episode. Can only be called once per episode.  

- **addEcity**()  
    Payable endpoint. Used to add ECITY after the episode has started.

- **stake**()  
    Payable endpoint. Used to stake NFTs. Will automatically claim any ECITY generated so far.  

- **unstakeSingle**(token_id: `TokenIdentifier`, nonce: `u64`)  
    Used to unstake a single NFT.  

- **unstake**(payments: `variadic<tuple<TokenIdentifier,u64,u64>>`)

- **claimEcity**(episode: `u64`, addr: `Address`)  
    Used to claim any claimable ECITY generated by *addr* during episode *episode*.  

- **claim**()  
    Used to claim all episodes that haven't been claimed yet.  
    
- **setEcityTokenid**(ecity_tokenid: `TokenIdentifier`)
- **setGnsTokenid**(gns_tokenid: `TokenIdentifier`)
- **setExpTokenid**(exp_tokenid: `TokenIdentifier`)
- **setCtznTokenid**(ctzn_tokenid: `TokenIdentifier`)
- **setRouterAddress**(router_address: `Address`)
- **addToCollections**(token_id: `TokenIdentifier`)

### Readonly
- **routerAddress**() -> `Address`  
- **staked**(user: `Address`, token_id: `TokenIdentifier`, nonce: `u64`) -> `BigUint`  
- **stakedIter**(user: `Address`, token_id: `TokenIdentifier`) -> `variadic<tuple<u64,BigUint>>`  
- **stakedTime**(user: `Address`) -> `u64`  
- **nbStaked**(user: `Address`) -> `u64`  
- **nbPlayers**() -> `u64`  
- **lastEpisodeClaimed**(user: `Address`) -> `u64`  
- **episodesTimestamps**(episode: `u64`) -> `u64`  
- **episodesRewards**(episode: `u64`) -> `BigUint`  
- **currentEpisode**() -> `u64`  
- **claimedPerEpisode**(episode: `u64`) -> `BigUint`  
- **fakeClaim**(addr: `Address`) -> `BigUint`  

